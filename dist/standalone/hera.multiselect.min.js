/*!
 * hera.multiselect.js v2.0.0
 * https://github.com/crewstyle/OlympusHera
 *
 * This plugin change dynamically the select tag with "multiple" attribute.
 *
 * Example of JS:
 *      $('select[multiple="true"]').heraMultiselect({
 *          container: '.container'                     //node element containing all data
 *      });
 *
 * Example of HTML:
 *      <fieldset class="container">
 *          <select multiple="true" data-value="1,2">
 *              <option value="1">Value 1</option>
 *              <option value="2">Value 2</option>
 *              <option value="3">Value 3</option>
 *          </select>
 *      </fieldset>
 *
 * Copyright 2016 Achraf Chouk
 * Achraf Chouk (https://github.com/crewstyle)
 */
!function(a){"use strict";var b=function(b,c){var d=this;d.$el=b,d.options=c,d.create(),d.$sel=d.$el.selectize({plugins:["drag_drop","remove_button","restore_on_backspace"],create:!1,onChange:a.proxy(d.onchange,d)}),d.refresh()};b.prototype.options=null,b.prototype.name=null,b.prototype.$el=null,b.prototype.$sel=null,b.prototype.$tar=null,b.prototype.create=function(){var a=this;a.name=a.$el.attr("name"),a.hiddenize(),a.$el.removeAttr("name"),a.$el.find("option:selected").removeAttr("selected")},b.prototype.hiddenize=function(){var b=this,c=b.$el.attr("data-value").split(",");b.$el.closest(b.options.container).find('input[name="'+b.name+'"]').remove(),a.each(c,function(c,d){var e=a(document.createElement("input")).attr({type:"hidden",name:b.name,value:d});b.$el.closest(b.options.container).append(e)})},b.prototype.refresh=function(){for(var a=this,b=a.$el.attr("data-value").split(","),c=a.$sel[0].selectize,d=0,e=b.length;e>d;d++)c.addItem(b[d])},b.prototype.onchange=function(a){var b=this,c=null===a||[]==a?"":a.join();b.$el.attr("data-value",c),b.hiddenize()};var c={init:function(c){if(!this.length)return!1;var d={container:".container"};return this.each(function(){c&&a.extend(d,c),new b(a(this),d)})},update:function(){},destroy:function(){}};a.fn.heraMultiselect=function(b){return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on heraMultiselect"),!1):c.init.apply(this,arguments)}}(window.jQuery);