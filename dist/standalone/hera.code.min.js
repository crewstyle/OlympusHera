/*!
 * hera.code.js v2.0.0
 * https://github.com/crewstyle/OlympusHera
 *
 * This plugin adds a complete integration with codemirror JS component:
 * http://codemirror.net/
 *
 * Example of JS:
 *      $('textarea.code').heraCode({
 *          changer: '.change-mode',                    //node containing a list of all enabled modes
 *          container: '.container',                    //node containing all dom elements
 *          focused: 'focused',                         //selected class
 *          theme: 'monokai',                           //only Monokai theme is enabled
 *
 *          //The following options are described here: https://codemirror.net/doc/manual.html#config
 *          enterMode: 'keep',
 *          indentUnit: 4,
 *          indentWithTabs: false,
 *          lineNumbers: true,
 *          lineWrapping: true,
 *          matchBrackets: true,
 *          mode: 'application/json',
 *          tabMode: 'shift'
 *      });
 *
 * Example of HTML:
 *      <fieldset class="container">
 *          <select class="change-mode">
 *              <option value="text/css">CSS</option>
 *              <option value="application/json" selected="selected">JSON</option>
 *              <option value="text/x-python">Python</option>
 *              <option value="text/x-sh">Shell</option>
 *              <option value="application/xml">XML</option>
 *          </select>
 *          <textarea class="code"></textarea>
 *      </fieldset>
 *
 * Copyright 2016 Achraf Chouk
 * Achraf Chouk (https://github.com/crewstyle)
 */
!function(a){"use strict";var b=function(b,c){var d=this;CodeMirror;return CodeMirror?(d.$el=b,d.options=c,d.options.readOnly=d.$el.attr("readonly")?"nocursor":!1,d.editor=CodeMirror.fromTextArea(d.$el.get(0),d.options),d.$change=d.$el.closest(d.options.container).find(c.changer),d.editor.on("blur",a.proxy(d.blurMode,d)),d.editor.on("focus",a.proxy(d.focusMode,d)),void(d.$change.length&&d.$change.on("change",a.proxy(d.changeMode,d)))):!1};b.prototype.$el=null,b.prototype.$change=null,b.prototype.editor=null,b.prototype.options=null,b.prototype.blurMode=function(a){var b=this;b.$el.parent().removeClass(b.options.focused)},b.prototype.focusMode=function(a){var b=this;b.$el.parent().addClass(b.options.focused)},b.prototype.changeMode=function(a){var b=this;b.editor.setOption("mode",b.$change.val())};var c={init:function(c){if(!this.length)return!1;var d={changer:".change-mode",container:".container",focused:"focused",theme:"monokai",enterMode:"keep",indentUnit:4,indentWithTabs:!1,lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,mode:"application/json",tabMode:"shift"};return this.each(function(){c&&a.extend(d,c),new b(a(this),d)})},update:function(){},destroy:function(){}};a.fn.heraCode=function(b){return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on heraCode"),!1):c.init.apply(this,arguments)}}(window.jQuery);